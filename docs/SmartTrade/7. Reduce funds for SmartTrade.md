## Reduce funds for SmartTrade<br>
<br>

**Description:** Starts the process of creating reduced funds<br>

{% hint style="info" %}
New trades and orders will be created on the exchange once the process begins.
{% endhint %}
<br>

**Permission:** SMART_TRADES_WRITE<br>
**Security:** SIGNED
<br>

<blockquote>

<code><mark style="color:green"><strong> POST </strong></mark></code>

<code>/v2/smart_trades/{id}/reduce_funds</code>

</blockquote>

<br>

### Path Parameter<br>
<p>
   <strong>id</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>integer</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<mark style="color:orange">required</mark><br>
   Unique 3Commas ID for the SmartTrade entity to be reduced
</p>
<br>

### Body Parameters<br>
<p>
   <strong>order_type</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>string</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<mark style="color:orange">required</mark><br>
   Order type for reducing funds in this SmartTrade: <code>market</code>, <code>limit</code>
</p>
<p>
   <strong>units</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>object</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<mark style="color:orange">required</mark><br>
   Specifies the number of units to reduce from the position
</p>
<p>
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>value</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>number</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<mark style="color:orange">required</mark><br>
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The exact amount of units to be reduced
</p>
<p>
   <strong>price</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>object</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<mark style="color:orange">required</mark><br>
   Defines the price for a limit order
</p>
<p>
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>value</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>integer</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<mark style="color:orange">required</mark><br>
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The specific price for the limit order
</p>
<br>

### Parameter response<br>

If successful, the response includes an updated copy of the [SmartTrade](./README.md) entity.

<br>

**Example Request**<br>
```json
POST /v2/smart_trades/12345678/reduce_funds

```
```json
Body:

{
   "order_type": "limit",
   "units": {
      "value": "0.04"
   },
   "price": {
      "value": "0.03711"
   }
}
```
<br>

### Example Response and Errors<br>
<details>
<summary>Status: 201 Created</summary><br>

```json
{
    "id": 12345678,
    "version": 2,
    "account": {
        "id": 32199203,
        "type": "paper_trading",
        "name": "Paper Account 1251857",
        "market": "Binance Spot account simulator",
        "link": "/accounts/32199203"
    },
    "pair": "BTC_ETH",
    "instant": false,
    "status": {
        "type": "pending_reduce_funds",
        "basic_type": "pending_reduce_funds",
        "title": "Pending reduce funds"
    },
    "leverage": {
        "enabled": false
    },
    "position": {
        "type": "buy",
        "editable": false,
        "units": {
            "value": "4.0",
            "editable": false
        },
        "price": {
            "value": "0.03719",
            "value_without_commission": "0.03716",
            "editable": false
        },
        "total": {
            "value": "0.14878864"
        },
        "order_type": "market",
        "status": {
            "type": "finished",
            "basic_type": "finished",
            "title": "Finished"
        }
    },
    "take_profit": {
        "enabled": true,
        "price_type": "value",
        "steps": [
            {
                "id": 1224972676,
                "order_type": "limit",
                "editable": true,
                "units": {
                    "value": "4.0"
                },
                "price": {
                    "type": "last",
                    "value": "0.04088",
                    "percent": null
                },
                "volume": "100.0",
                "total": "0.16352",
                "trailing": {
                    "enabled": false,
                    "percent": null
                },
                "status": {
                    "type": "order_placed",
                    "basic_type": "order_placed",
                    "title": "Placed"
                },
                "closed_at": null,
                "data": {
                    "cancelable": true,
                    "panic_sell_available": true
                },
                "position": 1
            }
        ]
    },
    "stop_loss": {
        "enabled": false
    },
    "reduce_funds": {
        "steps": [
            {
                "id": 1224983548,
                "type": "market",
                "status": {
                    "type": "idle",
                    "basic_type": "idle",
                    "title": "Pending"
                },
                "units": {
                    "value": "0.3995"
                },
                "price": {
                    "value": "0.03702",
                    "value_without_commission": "0.03702"
                },
                "total": {
                    "value": "0.01478949"
                },
                "closed_at": null,
                "data": {
                    "cancelable": false,
                    "panic_sell_available": false
                }
            }
        ]
    },
    "market_close": {},
    "note": "",
    "note_raw": null,
    "skip_enter_step": false,
    "data": {
        "editable": false,
        "current_price": {
            "day_change_percent": "-0.162",
            "bid": "0.03702",
            "ask": "0.03703",
            "last": "0.03703",
            "quote_volume": "1626.01355238"
        },
        "target_price_type": "price",
        "orderbook_price_currency": "BTC",
        "base_order_finished": true,
        "missing_funds_to_close": "0.0",
        "liquidation_price": null,
        "average_enter_price": "0.03719",
        "average_close_price": null,
        "average_enter_price_without_commission": "0.03716",
        "average_close_price_without_commission": null,
        "panic_sell_available": true,
        "add_funds_available": false,
        "reduce_funds_available": false,
        "force_start_available": false,
        "force_process_available": true,
        "cancel_available": true,
        "finished": false,
        "base_position_step_finished": true,
        "entered_amount": "4.0",
        "entered_total": "0.14878864",
        "closed_amount": "0.0",
        "closed_total": "0.0",
        "commission": 0.001,
        "created_at": "2024-12-17T15:44:49.405Z",
        "updated_at": "2024-12-17T15:52:33.169Z",
        "type": "smart_trade"
    },
    "profit": {
        "volume": "-0.00085672",
        "usd": "-91.0173245288",
        "percent": "-0.58",
        "roe": null
    },
    "margin": {
        "amount": null,
        "total": null
    },
    "is_position_not_filled": false
}
```
</details>
<details>
<summary>Status: 422 Unprocessable EntityCreated</summary><br>

```json
{
    "error": "record_invalid",
    "error_description": "Invalid parameters",
    "error_attributes": {
        "entered_amount": [
            "Too small"
        ]
    }
}
```
</details>
<details>
<summary>Status: 400 Bad Request</summary><br>

```json
{
    "error": "Wrong param(s)",
    "error_description": "Reduce funds is not allowed in the current status"
}
```
</details>