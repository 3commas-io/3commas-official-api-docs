import CollapsibleApiParam from '@site/src/components/CollapsibleApiParam';
import CollapsibleNestedParams from '@site/src/components/CollapsibleNestedParams';
import ApiParam from '@site/src/components/ApiParam';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<div className="main-container-endpoint">
    <div className="container-endpoint">
            <div className="container-method-get">
                <span className="endpoint-method">GET</span>
            </div>
              <div className="container-url">
                <span className="endpoint-url">/ver1/grid_bots/:id/required_balances</span>
           </div>
    </div>
    <div className="container-permission">
        <span className="permission-description"><strong>Permission: </strong>BOTS_READ</span>
        <span className="permission-description"><strong>Security: </strong>SIGNED</span>
    </div>
</div>

<p className="p-method-discription">
  Returns the amount of funds required to launch the Grid Bot and details about the current balance state.
</p>

<div class="alert alert--danger" role="alert" style={{ margin: '30px 20px 20px 20px', padding: '15px' }}>
This endpoint works only for the spot exchange.
</div>



<h2> Path Parameter </h2>
<ApiParam name='id' type='integer' id="id" required>
   Unique 3Commas ID for this Grid Bot entity
</ApiParam>

<h2> Response Parameters </h2>

<CollapsibleApiParam name="missing_balance" type="object" id="missing_balance">
   TBD
    <CollapsibleNestedParams>
    <ApiParam name='base' type='object' id='base'>
      Details of the missing amount in the base currency
    </ApiParam>
      <CollapsibleNestedParams>
         <ApiParam name='quantity' type='string' id='quantity'>
             The amount of the base currency that is missing
         </ApiParam>
         <ApiParam name='currency' type='string' id='currency'>
            The name or symbol of the base currency
         </ApiParam>
      </CollapsibleNestedParams>
    <ApiParam name='quote' type='object' id='quote'>
      Details of the missing amount in the quote currency
    </ApiParam>
      <CollapsibleNestedParams>
         <ApiParam name='quantity' type='string' id='quantity'>
             The amount of the quote currency that is missing
         </ApiParam>
         <ApiParam name='currency' type='string' id='currency'>
            The name or symbol of the quote currency
         </ApiParam>
      </CollapsibleNestedParams>
    </CollapsibleNestedParams>
</CollapsibleApiParam>
<CollapsibleApiParam name="required_balance" type="object" id="required_balance">
   The total amount of funds required in base and quote currencies to launch the Grid Bot
   <CollapsibleNestedParams>
      <ApiParam name='base' type='object' id='base'>
         Details of the required amount in the base currency
      </ApiParam>
         <CollapsibleNestedParams>
          <ApiParam name='quantity' type='string' id='quantity'>
                The total amount of the base currency required
            </ApiParam>
            <ApiParam name='currency' type='string' id='currency'>
            The name or symbol of the base currency
            </ApiParam>
         </CollapsibleNestedParams>
    <ApiParam name='quote' type='object' id='quote'>
      Details of the required amount in the quote currency
    </ApiParam>
      <CollapsibleNestedParams>
         <ApiParam name='quantity' type='string' id='quantity'>
             The total amount of the quote currency required
         </ApiParam>
         <ApiParam name='currency' type='string' id='currency'>
            The name or symbol of the quote currency
         </ApiParam>
      </CollapsibleNestedParams>
    </CollapsibleNestedParams>
</CollapsibleApiParam>
<CollapsibleApiParam name="need_balancing" type="boolean" id="need_balancing">
   Indicates whether additional funds are required to balance the Grid Bot (<code>true</code>) or not (<code>false</code>)
</CollapsibleApiParam>
<CollapsibleApiParam name="balancing_available" type="boolean" id="balancing_available">
   Indicates whether the bot can be balanced with the current available funds (<code>true</code>) or not (<code>false</code>)
</CollapsibleApiParam>
<CollapsibleApiParam name="necessary_quantities" type="object" id="necessary_quantities">
   Details of the exact amount and currency required to balance the Grid Bot
   <CollapsibleNestedParams>
    <ApiParam name='quantity' type='string' id='quantity'>
      The specific amount of the required currency needed to balance the bot
    </ApiParam>
    <ApiParam name='currency' type='string' id='currency'>
      The symbol of the currency required for balancing
    </ApiParam>
    </CollapsibleNestedParams>
</CollapsibleApiParam>

<h2> Example Request </h2>
<div style={{ margin: '10px', padding: '10px' }}>
```
GET /ver1/grid_bots/12345678/required_balances
```
</div>

<h2> Example response and errors</h2>
<div style={{ margin: '10px', padding: '10px' }}>
<Tabs>
  <TabItem value="200" label="200 OK" attributes={{className: "green"}}>

```json
{
   "missing_balance": {
      "base": {
         "quantity": "0.0",
         "currency": "BTC"
      },
      "quote": {
         "quantity": "8500.0",
         "currency": "USDT"
      }
   },
   "required_balance": {
      "base": {
         "quantity": "2.0",
         "currency": "BTC"
      },
      "quote": {
         "quantity": "18500.0",
         "currency": "USDT"
      }
   },
   "need_balancing": true,
   "balancing_available": true,
   "necessary_quantities": {
      "quantity": "8500.0",
      "currency": "USDT"
   }
}
```
</TabItem>
<TabItem value="404" label="404 Not Found" attributes={{className: "red"}}>

```json
{
    "error": "not_found",
    "error_description": "Not Found"
}
```
</TabItem>
<TabItem value="500" label="500 Internal Server Error" attributes={{className: "red"}}>

```json
{
    "error": "grid_lines_not_marked",
    "error_description": "Grid lines empty or not marked"
}
```
</TabItem>
</Tabs>
</div>
