import CollapsibleApiParam from '@site/src/components/CollapsibleApiParam';
import CollapsibleNestedParams from '@site/src/components/CollapsibleNestedParams';
import ApiParam from '@site/src/components/ApiParam';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<div className="main-container-endpoint">
    <div className="container-endpoint">
            <div className="container-method-post">
                <span className="endpoint-method">POST</span>
            </div>
              <div className="container-url">
                <span className="endpoint-url">/ver1/grid_bots/manual</span>
           </div>
    </div>
    <div className="container-permission">
        <span className="permission-description"><strong>Permission: </strong>BOTS_WRITEE</span>
        <span className="permission-description"><strong>Security: </strong>SIGNED</span>
    </div>
</div>

<p className="p-method-discription">
   Creates a new Grid Bot
</p>


<h2> Body parameters </h2>

<ApiParam name='name' type='integer' id="name" required>
   <p>Grid bot name specified by the user. If not specified, the system will generate a default name automatically</p>
   <p>Characters: <code>[1 ... 40]</code> </p>
</ApiParam>

<ApiParam name='account_id' type='integer' id="account_id" required>
   ID of the exchange account entity where the Grid Bot is created
</ApiParam>   

<ApiParam name='pair' type='string' id="pair" required>
   Trading pair in 3Commas format. Use the [All market pairs](Market%20data/All%20market%20pairs.md) endpoint to retrieve the list of supported pairs and their format
</ApiParam>

<ApiParam name='upper_price' type='number' id="upper_price" required>
   The maximum price of the trading range, above which the bot will not place sell orders
</ApiParam>

<ApiParam name='pair' type='string' id="pair" required>
   Trading pair in 3Commas format
</ApiParam>


<h3> More attributes </h3>

<CollapsibleApiParam name="lower_price" type="string" id="lower_price" required>
  The minimum price of the trading range, below which the bot will not place buy orders
</CollapsibleApiParam>
   
<CollapsibleApiParam name="grids_quantity" type="number" id="grids_quantity" required>
  The number of grid levels between the upper and lower price boundaries
</CollapsibleApiParam>   

<CollapsibleApiParam name="grid_type" type="string" id="grid_type">
  Type of Grid Bot configuration: <code>geometric</code> or <code>arithmetic</code>
</CollapsibleApiParam>

<CollapsibleApiParam name="quantity_per_grid" type="number" id="quantity_per_grid" required>
  Quantity of the asset allocated per Grid Bot level order
</CollapsibleApiParam>
   
<CollapsibleApiParam name="order_currency_type" type="string" id="order_currency_type">
  The currency type used for placing orders: <code>base</code> or <code>quote</code>
</CollapsibleApiParam>

<CollapsibleApiParam name="profit_currency_type" type="string" id="profit_currency_type">
  The currency in which the bot will generate profit: <code>base</code> or <code>quote</code>
</CollapsibleApiParam>

<CollapsibleApiParam name="upper_stop_loss_enabled" type="boolean" id="upper_stop_loss_enabled">
  Indicates if upper stop-loss settings are enabled (<code>true</code>) or not(<code>false</code>)
</CollapsibleApiParam>

<CollapsibleApiParam name="upper_stop_loss_action" type="string" id="upper_stop_loss_action">
  The action to perform if the asset price reaches or exceeds the set upper stop-loss level
  <CollapsibleApiParam name="Allowed values">
      <li><strong>stop_bot</strong>;</li>
       <li><strong>stop_bot_and_sell</strong>;</li>
       <li><strong>stop_bot_and_close_position</strong>;</li>
     </CollapsibleApiParam>
</CollapsibleApiParam>
   
<CollapsibleApiParam name="upper_stop_loss_price" type="number" id="upper_stop_loss_price">
  The price level that triggers the upper stop-loss action
</CollapsibleApiParam> 

<CollapsibleApiParam name="lower_stop_loss_enabled" type="boolean" id="lower_stop_loss_enabled">
   Indicates if lower stop-loss settings are enabled <code>true</code> or not (<code>false</code>)
</CollapsibleApiParam>

<CollapsibleApiParam name="lower_stop_loss_action" type="string" id="lower_stop_loss_action">
   The action to perform if the asset price reaches or falls below the set lower stop-loss level.
   <CollapsibleApiParam name="Allowed values">
      <li><strong>stop_bot</strong>;</li>
       <li><strong>stop_bot_and_sell</strong>;</li>
       <li><strong>stop_bot_and_close_position</strong>;</li>
     </CollapsibleApiParam>
</CollapsibleApiParam>

<CollapsibleApiParam name="lower_stop_loss_price" type="number" id="lower_stop_loss_price">
   The price level that triggers the lower stop-loss action
</CollapsibleApiParam>

<CollapsibleApiParam name="leverage_type" type="string" id="leverage_type">
Type of leverage applied for this Grid Bot
    <CollapsibleApiParam name="Allowed values">
      <li><strong>cross</strong> - uses all available funds in your account as collateral for your trades;</li>
       <li><strong>isolated</strong> - the margin is limited to a specific position;</li>
       <li><strong>not_specified</strong> - no leverage type specified for this DCA Bot;</li>
   </CollapsibleApiParam>
</CollapsibleApiParam>

<CollapsibleApiParam name="lower_stop_loss_price" type="number" id="lower_stop_loss_price">
   The price level that triggers the lower stop-loss action
</CollapsibleApiParam>

<CollapsibleApiParam name="leverage_custom_value" type="number" id="leverage_custom_value">
   Custom leverage value set for the Grid Bot
</CollapsibleApiParam>

<CollapsibleApiParam name="mode" type="string" id="mode">
   Type of strategy used by the bot
    <CollapsibleApiParam name="Allowed values">
      <li><strong>reversal</strong> - a strategy where the bot trades based on market trend reversals;</li>
       <li><strong>long</strong> - a strategy where the bot opens positions expecting the price to increase;</li>
       <li><strong>short</strong> - a strategy where the bot opens positions expecting the price to decrease;</li>
   </CollapsibleApiParam>
</CollapsibleApiParam>

<CollapsibleApiParam name="max_active_sell_lines" type="integer" id="max_active_sell_lines">
   Maximum number of active sell orders that can be placed simultaneously
</CollapsibleApiParam>

<CollapsibleApiParam name="trailing_up_enabled" type="boolean" id="trailing_up_enabled">
   Indicates if the trailing-up feature is enabled (<code>true</code> or not (<code>false</code>)
</CollapsibleApiParam>

<CollapsibleApiParam name="trailing_down_enabled" type="boolean" id="trailing_down_enabled">
   Indicates if the trailing-down feature is enabled (<code>true</code> or not (<code>false</code>)
</CollapsibleApiParam>

<CollapsibleApiParam name="expansion_down_enabled" type="boolean" id="expansion_down_enabled">
   Indicates if the grid expansion downwards is enabled (<code>true</code> or not (<code>false</code>)
</CollapsibleApiParam>

<CollapsibleApiParam name="expansion_down_stop_price" type="number" id="expansion_down_stop_price" required>
   <p>The price at which the downward grid expansion should stop</p>
   <p>This parameter is required when <code>expansion_down_enabled</code> is set to <code>true</code> </p>
</CollapsibleApiParam>

<CollapsibleApiParam name="expansion_up_enabled" type="boolean" id="expansion_up_stop_price">
   Indicates if the grid expansion upwards is enabled (<code>true</code> or not (<code>false</code>)
</CollapsibleApiParam>  

<CollapsibleApiParam name="expansion_up_stop_price" type="boolean" id="expansion_up_stop_price" required>
   <p>The price at which the upward grid expansion should stop.</p>
   <p>This parameter is required when <code>expansion_up_enabled</code> is set to <code>true</code>. </p>
</CollapsibleApiParam>

<CollapsibleApiParam name="ignore_warnings" type="boolean" id="ignore_warnings">
   Ignores warnings and forces the creation of the Grid Bot (<code>true</code>) or not (<code>false</code>)
</CollapsibleApiParam>
   
<CollapsibleApiParam name="note" type="integer" id="note">
   <p>Optional user-defined note for the Grid Bot</p>
   <p> <code>[1 ... 300]</code> characters </p>
</CollapsibleApiParam>

<h2> Parameters response </h2>

<p> If successful, the response includes a copy of [Grid Bot](./README.md) entity. </p>

<h2> Example Request </h2>

<div style={{ margin: '20px', padding: '10px' }}>

```json title="POST /ver1/grid_bots/manual"
{
   "account_id": 12345678,
   "pair": "USDT_ETH",
   "name": "Test GRID",
   "upper_price": 1.1,
   "lower_price": 0.56,
   "quantity_per_grid": 40,
   "grids_quantity": 28,
   "max_active_buy_lines": 28,
   "max_active_sell_lines": 28,
   "order_currency_type": "base",
   "profit_currency_type": "base",
   "ignore_warnings": false,
   "trailing_up_enabled": false,
   "trailing_down_enabled": true,
   "grid_type": "arithmetic",
   "expansion_down_enabled": false,
   "expansion_up_enabled": true,
   "expansion_up_stop_price": 1.57
}
```
</div>


<h2> Example Response and errors </h2>
<div style={{ margin: '20px', padding: '10px' }}>
<Tabs>
  <TabItem value="201" label="201 Created" attributes={{className: "green"}}>

```json
{
   "id": 2291723,
   "account_id": 73223,
   "account_name": "binance",
   "is_enabled": false,
   "grids_quantity": "50",
   "created_at": "2024-07-17T14:46:46.414Z",
   "updated_at": "2024-07-17T14:46:46.505Z",
   "strategy_type": "manual",
   "upper_stop_loss_enabled": true,
   "lower_stop_loss_enabled": true,
   "note": "Example bot",
   "editable": true,
   "lower_price": "56000.0",
   "lower_stop_loss_price": "50000.0",
   "lower_stop_loss_action": "stop_bot_and_sell",
   "upper_price": "72000.0",
   "upper_stop_loss_price": "75000.0",
   "upper_stop_loss_action": "stop_bot",
   "quantity_per_grid": "15.0",
   "leverage_type": "not_specified",
   "leverage_custom_value": null,
   "name": "USDT_BTC EXAMPLE",
   "pair": "USDT_BTC",
   "start_price": null,
   "grid_price_step": "326.530612244897959183673469387755102041",
   "current_profit": "0.0",
   "current_profit_usd": "0.0",
   "total_profits_count": "0",
   "bought_volume": "0.0",
   "sold_volume": "0.0",
   "profit_percentage": "0.0",
   "current_price": "65229.37",
   "max_active_buy_lines": "50",
   "max_active_sell_lines": "50",
   "order_currency_type": "quote",
   "profit_currency_type": "quote",
   "trailing_up_enabled": "true",
   "grid_type": "arithmetic",
   "investment_base_currency": "0.0",
   "investment_quote_currency": "0.0",
   "unrealized_profit_loss": "0",
   "current_profit_loss": null,
   "current_profit_loss_percent": null,
   "orderbook_price_currency": "USDT",
   "expansion_down_enabled": "true",
   "expansion_down_stop_price": "54000.0",
   "grid_lines": [
      {
         "id": 253750214,
         "price": "65142.86",
         "side": null,
         "order_placed": false
      },
      {
         "id": 253750235,
         "price": "72000.0",
         "side": "sell",
         "order_placed": false
      },
      ...
      
      {
         "id": 253750213,
         "price": "64816.33",
         "side": "buy",
         "order_placed": false
      }
   ]
}
```
</TabItem>

<TabItem value="400" label="400 Bad Request" attributes={{className: "red"}}>

```json
{
    "error": "record_invalid",
    "error_description": "Invalid parameters",
    "error_attributes": {
        "quantity_per_grid": [
            "is missing",
            "is empty"
        ]
    }
}

```
</TabItem>
<TabItem value="404" label="404 Not Found" attributes={{className: "red"}}>

```json
{
   "error": "not_found",
   "error_description": "Not Found"
}
```

   </TabItem>
   </Tabs>
</div>
